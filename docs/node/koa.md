# 从源码理解Koa洋葱模型

Koa框架的洋葱模型非常著名，但是之前只了解其概念，没有深入过代码细节。今天得空看了一下Koa中间件这部分的代码设计。不得感叹Koa的代码还真是精简。目测全部代码可能也就2000行左右的样子吧。废话不多说，先上一张经典洋葱模型图，然后再看源码。

![洋葱模型]()